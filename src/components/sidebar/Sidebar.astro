---
import Sitemap from './Sitemap.astro'
import { Icon } from 'astro-icon/components'
---

<input id="sidebar-toggle" type="checkbox" class="hidden" transition:persist />
<nav
  id="sidebar"
  class="fixed text-zinc-950 bg-zinc-300 border-r-2 border-zinc-900 left-0 bottom-0 z-10"
  transition:persist
>
  <label
    for="sidebar-toggle"
    class="flex items-center justify-end py-1 px-2
    text-right text-3xl select-none cursor-pointer
    hover:bg-blue-500"
  >
    <Icon name="ic:sharp-menu" />
  </label>

  <div id="sidebar-content" class="pl-4 py-1 min-h-full w-44">
    <Sitemap />
  </div>
</nav>

<style is:global>
  :root {
    --collapsed-width: 3rem;
    --expanded-width: 20rem;
    --sidebar-width: var(--expanded-width);
  }

  #sidebar {
    top: var(--header-height);
    min-width: var(--collapsed-width);
    min-height: calc(100vh - var(--header-height));
  }

  #content {
    margin-left: var(--sidebar-width);
  }
  #sidebar-content {
    width: var(--sidebar-width);
    display: block;
  }
  #sidebar-toggle:checked + #sidebar > #sidebar-content {
    display: none;
  }

  #sidebar-toggle:checked ~ #content {
    --sidebar-width: var(--collapsed-width);
  }

  #sidebar-toggle:not(:checked) + nav > label:not(:hover) {
    @apply bg-zinc-500;
  }
</style>
